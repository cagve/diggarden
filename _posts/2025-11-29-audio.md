---
title: Audiophile
tags: audio
comments: true
---

# BPD SERVER

## Smart playlist script
TODO!

## Funciones útiles 

### Play next
Esta función nos permite cargar una canción después de la actual. Para ello lo que hago es abrir un menu para seleccionar la canción dentro de la playlist actual. [[Para eliminar duplicados: `sort | uniq`::ls]]

Para añadir canciones a la cola se pueden utilizar `add` o `insert`. El primero lo añade al final, mientras que el segundo justo después de la canción que se esta reproduciendo. El argumento que reciben ambos es un archivo relativo, por lo que el resultado del dmenu no nos basta. En la tercera linea conseguimos el file asociado a dicha canción. 

```
playNext() {
	song=$(mpc playlist -f "%artist% - %title%" | sort | uniq |  dmenu -i -p "Canción:")
	[ -z "$song" ] && exit 0
	file=$(mpc playlist -f "%artist% - %title%:%file%" | sort | uniq | grep -F "$song" | cut -d':' -f2)
	notify-send "Canción seleccionada" "$song"
	mpc insert "$file"
}
```


